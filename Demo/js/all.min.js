function addCommas(r){strNum="";var e=0,o=r.toString().split(".");if(1==o.length&&(o[1]=""),o[0].length<4)strNum=o[0]+"."+o[1];else{for(e=""===o[1]?o[0].substr(o[0].length-3,3):o[0].substr(o[0].length-3,3)+"."+o[1],o[0]=o[0].substr(0,o[0].length-3);o[0].length>3;)o[0]=o[0].substr(0,o[0].length-3);o[0].length>0&&(strNum=o[0]+","+e)}return strNum}function formatDollar(r){var e=addCommas(r.toFixed(2));return"$"+e}var joker=jQuery.noConflict();joker(function(){joker("#ajaxMarkit").click(function(){joker.ajax({url:"http://dev.markitondemand.com/Api/v2/Quote/jsonp",method:"GET",data:{symbol:joker("#txtTickerMarkit").val()},dataType:"jsonp",beforeSend:function(r){var e='<img src ="Demo/images/loader.gif"/>',o="Demo/images/bg4.png",t="0.7";joker("#loading").html(e),joker("#wrapper").attr("style","position: fixed;top: 0%; z-index:99999; left: 0%; opacity:"+t+"; width:100%;height: 100%; background:url("+o+")")},error:function(r,e,o){joker("p").remove(".pMarkit");var t='<p class="pMarkit">jqXHR: '+r+" Status: "+e+" Error Thrown: "+o+"</p>";joker("#markitResult").append(t)},success:function(r,e,o){joker("#loading").html(""),joker("#wrapper").removeAttr("style"),joker("p").remove(".pMarkit");var t=JSON.parse(JSON.stringify(r)),a='<p class="pMarkit">'+t.Symbol+": "+t.Name+"<br/>";a+="Open: "+formatDollar(t.Open)+"<br/>",a+="Last Price: "+formatDollar(t.LastPrice)+"<br/>",a+="Range: "+formatDollar(t.Low)+" - "+formatDollar(t.High)+"<br/>",a+=formatDollar(t.Change)+" | "+t.ChangePercent.toFixed(2)+"%<br/>",a+="Market Cap: "+formatDollar(t.MarketCap)+"<br/>",a+="Volume: "+addCommas(t.Volume)+"<br/>",a+="Change YTD: "+formatDollar(t.ChangeYTD)+" | "+t.ChangePercentYTD.toFixed(2)+"%<p/>",joker("#markitResult").append(a)}})}),joker("#ajaxButton").click(function(){joker.ajax({url:"https://www.google.com/finance/info",method:"GET",data:{q:"NYSE:"+joker("#txtTicker").val(),client:"ig"},dataType:"jsonp",beforeSend:function(r){var e='<img src ="Demo/images/loader.gif"/>',o="Demo/images/bg4.png",t="0.7";joker("#loading").html(e),joker("#wrapper").attr("style","position: fixed;top: 0%; z-index:99999; left: 0%; opacity:"+t+"; width:100%;height: 100%; background:url("+o+")")},error:function(r,e,o){joker("p").remove(".pGoogle");var t='<p class="pGoogle">Inforamation for '+joker("#txtTicker").val()+" was not found</p>";t+='<p class="pGoogle">Error Infomation : '+r.status+"</p>",t+='<p class="pGoogle">Status: '+e+"</p>",t+='<p class="pGoogle">Error Thrown: '+o+"</p>",joker("#ajaxResult").append(t)},success:function(r,e,o){joker("#loading").html(""),joker("#wrapper").removeAttr("style");var t=JSON.stringify(r).replace("[","");t=t.replace("]",""),joker("p").remove(".pGoogle");var a=JSON.parse(t),n='<p class="pGoogle">Date: '+a.lt+"<br/>Ticker: "+a.t+"<br/>Exchange: "+a.e+"<br/>Last price: $"+a.l+"<br/>Price change: $"+a.c+"<br/>Percent change: "+a.cp+"%</p>";joker("#ajaxResult").append(n)}})})});
function init(){draw(),sun.src="https://mdn.mozillademos.org/files/1456/Canvas_sun.png",moon.src="https://mdn.mozillademos.org/files/1443/Canvas_moon.png",earth.src="https://mdn.mozillademos.org/files/1429/Canvas_earth.png",window.requestAnimationFrame(drawA),canvasB=document.getElementById("breakOut"),ctxA=canvasB.getContext("2d"),blockColors=["red","orange","yellow","green","blue","indigo","violet"],offSet=50,numOfRows=7,blockWidth=50,blockHeight=15,numOfCols=Math.floor(canvasB.width/blockWidth),blocks=new Array(numOfRows);for(var t=0;t<blocks.length;t++){blocks[t]=new Array(numOfCols);for(var l=0;l<blocks[t].length;l++)blocks[t][l]={x:blockWidth*l,y:blockHeight*t+offSet,width:blockWidth,height:blockHeight,color:blockColors[t],draw:function(){ctxA.fillStyle=this.color,ctxA.fillRect(this.x,this.y,this.width,this.height)},checkCollision:function(t){return(t.y+t.vy+t.radius==this.y||t.y+t.vy-t.radius==this.y+this.height)&&t.x+t.vx-t.radius<this.x+this.width&&t.x+t.vx+t.radius>this.x?(t.vy=-t.vy,!0):t.y+t.vy+t.radius>this.y&&t.y+t.vy-t.radius<this.y+userBlock.height&&(t.x+t.vx-t.radius==this.x+this.width||t.x+t.vx+t.radius==this.x)?(t.vx=-t.vx,!0):!1}},blocks[t][l].draw()}ball={x:100,y:numOfRows*blockHeight+offSet+50,vx:5,vy:2,radius:10,color:"blue",draw:function(){ctxA.beginPath(),ctxA.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),ctxA.closePath(),ctxA.fillStyle=this.color,ctxA.fill()}},userBlock={x:1,y:375,width:50,height:15,color:"red",draw:function(){ctxA.fillStyle=this.color,ctxA.fillRect(this.x,this.y,this.width,this.height)},checkCollision:function(t){t.y+t.vy+t.radius>this.y&&t.y+t.vy-t.radius<userBlock.y+this.height&&t.x+t.vx-t.radius<this.x+this.width&&t.x+t.vx+t.radius>this.x&&(t.vy=-t.vy),t.y+t.vy+t.radius>this.y&&t.y+t.vy-t.radius<userBlock.y+userBlock.height&&(t.x+t.vx-t.radius==this.x+this.width||t.x+t.vx+t.radius==this.x)&&(t.vx=-t.vx)}},Left=canvasB.offsetLeft+userBlock.width/2,canvasB.addEventListener("mouseover",function(t){}),canvasB.addEventListener("mouseout",function(t){window.cancelAnimationFrame(raf),running=!1}),canvasB.addEventListener("click",function(t){if(!running){ball.x=100,ball.y=numOfRows*blockHeight+offSet+50,ball.vx=5,ball.vy=2,blocks=new Array(numOfRows);for(var l=0;l<blocks.length;l++){blocks[l]=new Array(numOfCols);for(var e=0;e<blocks[l].length;e++)blocks[l][e]={x:blockWidth*e,y:blockHeight*l+offSet,width:blockWidth,height:blockHeight,color:blockColors[l],draw:function(){ctxA.fillStyle=this.color,ctxA.fillRect(this.x,this.y,this.width,this.height)},checkCollision:function(t){return t.y+t.vy+t.radius>this.y&&t.y+t.vy-t.radius<this.y+this.height&&t.x+t.vx-t.radius<this.x+this.width&&t.x+t.vx+t.radius>this.x?((t.y+t.vy+t.radius)/this.height>=(t.x+t.vx+t.radius)/this.width?t.vy=-t.vy:t.vx=-t.vx,!0):!1}},blocks[l][e].draw()}raf=window.requestAnimationFrame(breakOutAnimation),running=!0}}),canvasB.addEventListener("mousemove",function(t){running&&(clear(canvasB),userBlock.x=t.clientX-Left,ball.draw(),userBlock.draw())}),ball.draw(),userBlock.draw()}function clear(t){ctxA.fillStyle="rgba(255,255,255,0.3)",ctxA.fillRect(0,0,t.width,t.height)}function breakOutAnimation(){ctxA.clearRect(0,0,canvasB.width,canvasB.height);for(var t=0;t<blocks.length;t++)for(var l=0;l<blocks[t].length;l++)blocks[t][l].draw();userBlock.draw(),ball.draw(),ball.x+=ball.vx,ball.y+=ball.vy,ball.y+ball.vy-ball.radius>canvasB.height&&(ctxA.font="48px serif",ctxA.textBaseline="hanging",ctxA.strokeText("You Failed",canvasB.width/4,canvasB.height/2),running=!1),ball.y+ball.vy-ball.radius<0&&(ball.vy=-ball.vy),(ball.x+ball.vx+ball.radius>canvasB.width||ball.x+ball.vx-ball.radius<0)&&(ball.vx=-ball.vx),userBlock.checkCollision(ball);for(var t=0;t<blocks.length;t++)for(var l=0;l<blocks[t].length;l++)if(blocks[t][l].checkCollision(ball)&&(blocks[t].splice(l,1),0==blocks[t].length)){blocks.splice(t,1);break}0==blocks.length&&(ctxA.font="48px serif",ctxA.textBaseline="hanging",ctxA.strokeText("You Won",canvasB.width/4,canvasB.height/2),running=!1),running?raf=window.requestAnimationFrame(breakOutAnimation):window.cancelAnimationFrame(raf)}function draw(){var t=document.getElementById("mainCanvas"),l=t.getContext("2d");l.fillStyle="rgb(200,0,0)",l.fillRect(10,10,55,50),l.fillStyle="rgba(0, 0, 200, 0.5)",l.fillRect(30,30,55,50),l.fillStyle="rgba(0, 200, 0, 0.5)",l.fillRect(70,0,55,50),l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(125,125,100,100),l.clearRect(145,145,60,60),l.strokeRect(150,150,50,50);var e=new Path2D;e.moveTo(175,50),e.lineTo(200,75),e.lineTo(200,25),l.fill(e);var i=new Path2D;i.arc(275,75,50,0,2*Math.PI,!0),i.moveTo(310,75),i.arc(275,75,35,0,Math.PI,!1),i.moveTo(265,65),i.arc(260,65,5,0,2*Math.PI,!0),i.moveTo(295,65),i.arc(290,65,5,0,2*Math.PI,!0),l.stroke(i);var a=new Path2D;a.moveTo(25,125),a.lineTo(105,125),a.lineTo(25,205),l.fill(a);var o=new Path2D;o.moveTo(125,225),o.lineTo(125,145),o.lineTo(45,225),o.closePath(),l.stroke(o)}function drawA(){var t=document.getElementById("solarSystem").getContext("2d");t.globalCompositeOperation="destination-over",t.clearRect(0,0,300,300),t.fillStyle="rgba(0,0,0,0.4)",t.strokeStyle="rgba(0,153,255,0.4)",t.save(),t.translate(150,150);var l=new Date;t.rotate(2*Math.PI/60*l.getSeconds()+2*Math.PI/6e4*l.getMilliseconds()),t.translate(105,0),t.fillRect(0,-12,50,24),t.drawImage(earth,-12,-12),t.save(),t.rotate(2*Math.PI/6*l.getSeconds()+2*Math.PI/6e3*l.getMilliseconds()),t.translate(0,28.5),t.drawImage(moon,-3.5,-3.5),t.restore(),t.restore(),t.beginPath(),t.arc(150,150,105,0,2*Math.PI,!1),t.stroke(),t.drawImage(sun,0,0,300,300),window.requestAnimationFrame(drawA)}var sun=new Image,moon=new Image,earth=new Image,canvasB,ctxA,raf,running=!1,ball,userBlock,blocks,numOfRows,numOfCols,blockWidth,blockHeight,blockColors,offSet,Left;